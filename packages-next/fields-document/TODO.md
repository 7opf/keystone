# Terminology & Spec

- `Elements` are anything you can insert in the editor (block or inline things)
- `Block Types` is a catch-all for "block-level" elements you can insert (i.e not _marks_)
- `Block Format` is the general term for a set of built-in block types you can insert. These are simple blocks that contain either text (e.g headings) or paragraphs (e.g blockquote). Conceptualy Lists are block formats, although they contain list item blocks, not paragraphs. Block formats are further specified below as Block Classes.
  - [ ] You can switch between most block formats using the toolbar and formatting shortcuts
  - [ ] When you insert a new block format using the insert menu, it inserts a new block of that type after the current one
- `Alignment` is a property of a limited number of block types
- `Inline Elements` are things you can insert that appear inline and have special properties
- `Inline Marks` are formatting marks applied to text nodes within a block. Includes things like bold, italic, etc.
- `Links` are hyperlinks that can be applied to text (like a mark, with an `href` property)
- `Block Classes` represent a set of block types that implement consistent behaviour (and are often configured together)
  - `Paragraph` is the default block type at the root of the editor
    - [x] you cannot nest paragraphs
    - [x] supports alignment
    - [x] supports all inline marks
    - [x] supports links
    - [ ] supports soft breaks
    - [x] supports inline relationships
    - [x] enter inserts a new paragraph after the current one (including splitting remaining text)
  - `Headings` 1-6
    - [x] only contains text, no nested blocks
    - [ ] supports alignment
    - [x] supports links
    - [ ] supports soft breaks
    - [x] toolbar behaves as a toggle
    - [x] you can convert existing blocks to headings
    - [ ] inline marks and relationships are stripped when you convert a block into a heading - why?
    - [x] you cannot insert nested headings
    - [x] `enter` inserts a new paragraph after the block (including splitting remaining text)
    - [ ] `backspace` at the start resets to Paragraph - sort of true?
  - `Lists` (technically, these contain list item blocks)
    - [x] contains list items and nested list blocks, no other blocks
    - [x] supports links
    - [x] supports all inline marks
    - [ ] supports soft breaks
    - [x] supports inline relationships
    - [x] toolbar behaves as a toggle
    - [x] `enter` inserts a new list item (including splitting remaining text)
    - [x] `enter` in an empty+last-child list item resets to Paragraph after the outermost list block
    - [ ] `backspace` at the start of a list item, or in an empty list item, unwraps the list item to the parent list or converts to a paragraph at the top level (including splitting list blocks if followed by more list items) - wrong imo, this is the behaviour of enter. backspace goes to the previous list item
    - [x] can be nested, including without any items at the parent level (weird, but ok)
    - [x] `tab` indents the current list item into a nested list of the same type
    - [ ] `shift+tab` unwraps the list up to the top level (but does not remove the outer list when you are at the top level). - why not remove the outer list when at the top level?
    - [x] using the toolbar to switch list types converts the parent list of the selected list item (not all parents)
  - `Formats` are paragraph-like block types that you can insert, like `blockquote` and `code`.
    - [x] contains paragraphs
    - [x] supports links
    - [x] supports all inline marks
    - [ ] supports soft breaks
    - [x] supports inline relationships
    - [ ] toolbar behaves as a toggle
    - [ ] cannot be nested
    - [x] `backspace` at the start of the block resets to Paragraph (unwraps all paragraphs in the block)
    - [x] `enter` inserts a new paragraph within the format block
    - [x] `enter` in an empty+last-child paragraph resets to Paragraph after the format block
    - [ ] supports links, soft breaks, inline relationships and all inline marks
- `Divider` is a special block type you can insert that renders a horizontal line
  - [x] Supports no children
  - [x] Can be selected by clicking on it (displays hilighted; `backspace` or `delete` removes it)
- `Layouts` are a special block type you can insert that contain almost any other block type, laid out horizontally in configurable columns
  - [x] contains column blocks, which must contain at least one paragraph (or other block format)
  - [x] can contain all built-in block formats
  - [x] can contain inline and block relationships
  - [ ] can conditionally contain component blocks (based on component config)
  - [x] cannot be nested
  - [x] can only be inserted at the top level of the document
  - [ ] `tab` at the end of a column moves the cursor to the start of the next column, or after the layout block
  - [ ] `shift+tab` at the start of a column moves the cursor to the end of the previous column, or before the layout block
  - [ ] layouts "trap" the selection - `enter` does not insert outside of the current column, and `backspace` does not remove columns or the layout block
  - [ ] you can select a layout by clicking in its border or margin (displays hilighted; `backspace` or `delete` removes it)
  - [x] when a layout is the last node in a document, we ensure a paragraph exists after it (low priority) - a paragraph must always be the last node in a document
- `Relationships` are a thing you can define, with one of three types which determine where it is available. They store a reference to an itemId and are (optionally) hydrated with additional data when the document field is queried. They are voids and contain no editable text.
  - `inline` relationships can be inserted into paragraphs and lists, and appear inline (like the "mentions" pattern -- low priority)
  - `block` relationships can be inserted like other blocks at the top level of the document, and inside layouts
  - `prop` relationships are available to be referenced by component block props
- `Component Blocks` are configurable block elements that you can insert at the top level, and conditionally inside layouts. They are specified in the views file with `props` (fields) and a `Preview` component that renders them in the editor.
  - `child` props must be rendered in the Preview component, and are editable in the preview. You can configure available formatting options that can be applied with the main editor toolbar, as well as rules for whether breaks, dividers, links and paragraphs can be inserted.
  - other props are rendered in the form view
